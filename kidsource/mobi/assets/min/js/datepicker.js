var DatePicker=(function(d,c,a,e){function b(h){var k=this;var j=h.target;k.options=h;k.nowtime=h.defaultdate?new Date(h.defaultdate.replace(/\-/ig,"/")):new Date();k.showtype=h.showtype;k.daygroup=h.daygroup;k.dayarr=[];if(k.showtype=="scroll"){var f=d(".datepicker").length;k.dom=k.creatdom(h,f);d("body").append(k.dom);var i=d(".datepicker"+f);k.gr(i);if(k.day){var g=k.nowtime.getMonth()+1;if(g==2){k.day.find(".o").removeClass("o");if(k.nowtime.getFullYear()%4){k.day.find("li:gt(27)").addClass("o")}else{k.day.find("li:gt(28)").addClass("o")}}else{if(g==1||g==3||g==5||g==7||g==8||g==10||g==12){k.day.find("li").removeClass("o")}else{k.day.find("li").removeClass("o");k.day.find("li:gt(29)").addClass("o")}}}k.cal=i.find(".dp-cal");k.sure=i.find(".dp-sure");k.ls=i.find(".list");k.ls.each(function(m,l){var s=d(this);var r=s.find("ul");var w=r.find("li");var p=parseInt(s.attr("data-num"));var t=s.attr("data-type");var o=0;var u=0;var q=0;var v=0;s.on("touchstart",function(n){u=n.originalEvent.touches[0].pageY;v=n.originalEvent.touches[0].pageY;o=parseInt(s.attr("data-aty"));if(t=="d"){p=31-s.find(".o").length}}).on("touchmove",function(n){v=n.originalEvent.touches[0].pageY;r.attr("style","-webkit-transform:translate3d(0,"+(o+v-u)+"px,0);transform:translate3d(0,"+(o+v-u)+"px,0)")}).on("touchend",function(){o=o+v-u;o=Math.round(o/30)*30;if(o>=60){o=60}if(o<=(3-p)*30){o=(3-p)*30}if(t=="m"&&k.day){var n=(60-o)/30+1;if(n==2){k.day.find("li").removeClass("o");if(parseInt(k.year.find("li").eq(2-parseInt(k.year.attr("data-aty"))/30).html())%4){k.day.find("li:gt(27)").addClass("o")}else{k.day.find("li:gt(28)").addClass("o")}}else{if(n==1||n==3||n==5||n==7||n==8||n==10||n==12){k.day.find("li").removeClass("o")}else{k.day.find("li").removeClass("o");k.day.find("li:gt(29)").addClass("o")}}}r.attr("style","-webkit-transform:translate3d(0,"+(o)+"px,0);transform:translate3d(0,"+(o)+"px,0);-webkit-transition: -webkit-transform 0.4s;transition:transform 0.4s;");s.attr("data-aty",o)})});k.cal.click(function(){i.hide();a.body.removeEventListener("touchmove",noscroll,false)});k.sure.click(function(){var m=h.timeformat;if(k.year){var l=k.year.find("li").eq(2-parseInt(k.year.attr("data-aty"))/30).html();m=m.replace("y",l)}if(k.month){var l=k.month.find("li").eq(2-parseInt(k.month.attr("data-aty"))/30).html();l=l.length==1?"0"+l:l;m=m.replace("m",l)}if(k.day){var l=k.day.find("li").eq(2-parseInt(k.day.attr("data-aty"))/30).html();l=l.length==1?"0"+l:l;m=m.replace("d",l)}if(k.hours){var l=k.hours.find("li").eq(2-parseInt(k.hours.attr("data-aty"))/30).html();l=l.length==1?"0"+l:l;m=m.replace("h",l)}if(k.min){var l=k.min.find("li").eq(2-parseInt(k.min.attr("data-aty"))/30).html();l=l.length==1?"0"+l:l;m=m.replace("i",l)}d(j).val(m);d(j).change();i.hide();a.body.removeEventListener("touchmove",noscroll,false)});d(j).click(function(){a.body.addEventListener("touchmove",noscroll,false);i.show()})}else{if(k.showtype=="cover"||k.showtype=="indiv"){k.month=k.nowtime.getMonth()+1;k.year=k.nowtime.getFullYear();k.prevtext=h.prevtext?h.prevtext:"&lt;";k.nexttext=h.nexttext?h.nexttext:"&gt;";k.monthtext=h.monthtext?h.monthtext:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"];k.weektext=h.weektext?h.weektext:["日","一","二","三","四","五","六"];var f=d(".datepickerdiv").length;k.dom=k.creatdomdiv(f);d(h.target).append(k.dom);var i=d(".datepickerdiv"+f);k.ele=i;k.close=i.find(".dp-close");k.tds=i.find("td");k.prevbtn=i.find(".prev");k.nextbtn=i.find(".next");h.prev==0?k.prevbtn.hide():"";h.next==0?k.nextbtn.hide():"";k.spanyear=i.find(".year");k.monthspan=i.find(".m");k.namespan=i.find(".name");k.tdclick();k.prevbtn.click(function(){k.monthchange("prev")});k.nextbtn.click(function(){k.monthchange("next")});k.close.click(function(){if(h.close==1){d(j).hide()}})}}}b.prototype={constructor:b,creatdom:function(g,f){return'<div class="datepicker datepicker'+f+' dsb ptf z3 hp100 wp100 " style="display:none;">			<div class="dpls dpls'+(g.timegroup.split("-").length)+' pta b0 wp100 cff bgcfff z2">'+this.timels(g.timegroup)+'</div>			<p class="dp-btn pta wp100 b0 z5">				<a href="javascript:;" class="dp-cal dsb fl wp50 alic cff fwb">取消</a>				<a href="javascript:;" class="dp-sure dsb fl wp50 bd-l alic cff fwb">确定</a>			</p>		</div> '},gr:function(f){if(d(f).find('div[data-type="y"]').length>0){this.year=d(f).find('div[data-type="y"]')}if(d(f).find('div[data-type="m"]').length>0){this.month=d(f).find('div[data-type="m"]')}if(d(f).find('div[data-type="d"]').length>0){this.day=d(f).find('div[data-type="d"]')}if(d(f).find('div[data-type="h"]').length>0){this.hours=d(f).find('div[data-type="h"]')}if(d(f).find('div[data-type="i"]').length>0){this.min=d(f).find('div[data-type="i"]')}},timels:function(m){var q="";var l=m.split("-");for(var s=0;s<l.length;s++){if(l[s]=="y"){var h="";for(var r=2029;r>=1970;r--){h+='<li class="dp-option">'+r+"</li>"}var i=this.nowtime.getFullYear()-2029+2;var f="-webkit-transform:translate3d(0,"+(i*30)+"px,0);transform:translate3d(0,"+(i*30)+"px,0)";
    q+='<div class="dp-select"><p class="th fs18 fwb c33 alic">年</p><span class="sp pta z4 dsb bd-t bd-b"></span><div class="list cff alic ptr ovh z4" data-num="60" data-type="y" data-aty="'+(i*30)+'"><ul style="'+f+'" class="dp-options ovh ptr z2">'+h+"</ul></div></div>"}else{if(l[s]=="m"){var j="";for(var r=1;r<=12;r++){j+='<li class="dp-option">'+r+"</li>"}var i=-this.nowtime.getMonth()+2;var f="-webkit-transform:translate3d(0,"+(i*30)+"px,0);transform:translate3d(0,"+(i*30)+"px,0)";q+='<div class="dp-select"><p class="th fs18 fwb c33 alic">月</p><span class="sp pta z4 dsb bd-t bd-b"></span><div class="list cff alic ptr ovh z4" data-num="12" data-type="m" data-aty="'+(i*30)+'"><ul style="'+f+'" class="dp-options ovh ptr z2">'+j+"</ul></div></div>"}else{if(l[s]=="d"){var p="";for(var r=1;r<=31;r++){p+='<li class="dp-option">'+r+"</li>"}var i=-this.nowtime.getDate()+3;var f="-webkit-transform:translate3d(0,"+(i*30)+"px,0);transform:translate3d(0,"+(i*30)+"px,0)";q+='<div class="dp-select"><p class="th fs18 fwb c33 alic">日</p><span class="sp pta z4 dsb bd-t bd-b"></span><div class="list cff alic ptr ovh z4" data-num="31" data-type="d" data-aty="'+(i*30)+'"><ul style="'+f+'" class="dp-options ovh ptr z2">'+p+"</ul></div></div>"}else{if(l[s]=="h"){var o="";for(var r=1;r<=24;r++){o+='<li class="dp-option">'+r+"</li>"}var i=-this.nowtime.getHours()+3;var f="-webkit-transform:translate3d(0,"+(i*30)+"px,0);transform:translate3d(0,"+(i*30)+"px,0)";q+='<div class="dp-select"><p class="th fs18 fwb c33 alic">时</p><span class="sp pta z4 dsb bd-t bd-b"></span><div class="list cff alic ptr ovh z4" data-num="24" data-type="h" data-aty="'+(i*30)+'"><ul style="'+f+'" class="dp-options ovh ptr z2 ovh ptr z2">'+o+"</ul></div></div>"}else{if(l[s]=="i"){var k="";for(var r=0;r<=59;r++){k+='<li class="dp-option">'+r+"</li>"}var i=-this.nowtime.getMinutes()+2;var f="-webkit-transform:translate3d(0,"+(i*30)+"px,0);transform:translate3d(0,"+(i*30)+"px,0)";q+='<div class="dp-select"><p class="th fs18 fwb c33 alic">分</p><span class="sp pta z4 dsb bd-t bd-b"></span><div class="list cff alic ptr ovh z4" data-num="60" data-type="i" data-aty="'+(i*30)+'"><ul style="'+f+'" class="dp-options ovh ptr z2">'+k+"</ul></div></div>"}}}}}}return q},creatdomdiv:function(f){var g='<div class="datepickerdiv datepicker'+this.showtype+" ovh datepickerdiv"+f+'">			<div class="box bgcfff ptr z3">				<div class="dp-top bgc ptr alic">					<a href="javascript:;" class="prev dsb pta alic cff">'+this.prevtext+'</a>					<a href="javascript:;" class="next dsb pta r0 alic cff">'+this.nexttext+'</a>					<p><span class="name fwb cff plr5"></span><span class="m fwb cff plr5">'+this.monthtext[this.nowtime.getMonth()]+'</span><span class="year fwb cff plr5">'+this.nowtime.getFullYear()+'</span></p>				</div>				<div class="table">					<table width="100%" cellspacing="0" cellpadding="0">						<tr>							<th class="lh28">'+this.weektext[0]+"</th><th>"+this.weektext[1]+"</th><th>"+this.weektext[2]+"</th><th>"+this.weektext[3]+"</th><th>"+this.weektext[4]+"</th><th>"+this.weektext[5]+"</th><th>"+this.weektext[6]+"</th>						</tr>"+this.creatday(this.nowtime.getFullYear(),this.nowtime.getMonth()+1)+'					</table>				</div>			</div>			<a href="javascript:;" class="dp-close pta z2 dsb hp100 wp100 "></a>		</div>';return g},creatday:function(r,j){var q="";var l=new Date(r+"/"+j+"/1");var g=0;var p=l.getMonth()+1;if(p==2){if(l.getFullYear()%4){g=28}else{g=29}}else{if(p==1||p==3||p==5||p==7||p==8||p==10||p==12){g=31}else{g=30}}var f=l.getDay();for(var k=0;k<Math.ceil((g+f)/7);k++){var o="";for(var h=1;h<=7;h++){if((k*7+h>f)&&(k*7+h<=g+f)){var s=d.inArray(r+"/"+j+"/"+(k*7+h-f),this.dayarr)>-1?"active":"";if(k*7+h-f==this.nowtime.getDate()&&l.getMonth()==this.nowtime.getMonth()){o+='<td data-time="'+r+"/"+j+"/"+(k*7+h-f)+'"><a href="javascript:;" data-time="'+r+"/"+j+"/"+(k*7+h-f)+'" class="today dsb pr5 alir fs12 c33 ptr active '+s+'" data-year="'+r+'" data-month="'+j+'" data-date="'+(k*7+h-f)+'">'+(k*7+h-f)+"</a></td>"}else{o+='<td data-time="'+r+"/"+j+"/"+(k*7+h-f)+'"><a href="javascript:;" data-time="'+r+"/"+j+"/"+(k*7+h-f)+'" data-year="'+r+'" data-month="'+j+'" data-date="'+(k*7+h-f)+'" class="dsb pr5 alir fs12 c33 ptr '+s+'">'+(k*7+h-f)+"</a></td>"}}else{o+='<td><a href="javascript:;"></a></td>'}}q+="<tr>"+o+"</tr>"}return q},initialday:function(f,h){var g='<table width="100%" cellspacing="0" cellpadding="0">				<tr>					<th class="lh28">'+this.weektext[0]+"</th><th>"+this.weektext[1]+"</th><th>"+this.weektext[2]+"</th><th>"+this.weektext[3]+"</th><th>"+this.weektext[4]+"</th><th>"+this.weektext[5]+"</th><th>"+this.weektext[6]+"</th>				</tr>"+this.creatday(h,f)+"			</table>";d(g).replaceAll(this.ele.find("table"));this.tdclick();this.monthspan.html(this.monthtext[f-1]);this.spanyear.html(h)},resettime:function(g,h,f){var g=g?new Date(g):new Date();this.year=g.getFullYear();this.month=g.getMonth()+1;this.spanyear.html(this.year);this.monthspan.html(this.monthtext[this.month-1]);
    this.initialday(this.month,this.year);f=f||c;if(h){h.call(f)}},monthchange:function(f){var g=this;if(f=="prev"){g.month--}else{g.month++}if(g.month<1){g.year--;g.spanyear.html(g.year);g.month=12}if(g.month>12){g.year++;g.spanyear.html(g.year);g.month=1}g.monthspan.html(g.monthtext[g.month-1]);g.initialday(g.month,g.year);g.tdclick();if(g.options.monthchange){g.options.monthchange(g.year,g.month)}},tdclick:function(){var f=this;f.tds=f.ele.find("td");f.tdas=f.ele.find("table a");f.tdas.click(function(){var g=d(this);if(f.daygroup){if(g.hasClass("active")){if(f.dayarr.length<=1){return false}f.dayarr.remove(g.attr("data-time"));g.removeClass("active")}else{f.dayarr.push(g.attr("data-time"));g.addClass("active")}}else{f.tdas.removeClass("active");g.addClass("active")}})}};Array.prototype.remove=function(g){if(typeof(g)=="undefined"){return false}for(var f=0,h=0;f<this.length;f++){if(g!=this[f]){this[h++]=this[f]}}this.length-=1};return b})(jQuery,window,document);