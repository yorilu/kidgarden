(function(c,b,a,e){var d={_wxInfo:{},_globalConfig:b.globalConfig,_getWxInfo:function(i){var h=this;var f=b.location.href.split("#")[0];var g=((new Date()).getTime()+"").substr(0,10);c.sendAjax({"type":"GET","url":h._globalConfig.urlPrefix+"/wx/signature/sign?url="+f+"&timestamp="+g,"dataType":"json","success":function(k){if(k.code!==0){return false}var j=JSON.parse(b.localStorage.getItem("wxInfo"))||{};j[b.location.pathname]={noncestr:k.data.noncestr,signature:k.data.signature,ts:g};b.localStorage.setItem("wxInfo",JSON.stringify(j));i.call(h,k.data.noncestr,k.data.signature,g)},error:function(){alert("系统参数错误，部分功能无法正常运行，请稍后再试···")}})},_genWxConfig:function(g,f,h){var i=[];if(b.jsApiLists&&b.jsApiLists.length){i=this._globalConfig.jsApiList.concat(b.jsApiLists)}else{i=this._globalConfig.jsApiList}wx.config({debug:false,appId:this._globalConfig.appId,timestamp:h,nonceStr:g,signature:f,jsApiList:i});this._hideOptionMenu()},_hideOptionMenu:function(){wx.ready(function(){wx.hideOptionMenu()})},_weChatAuto:function(g){var h=b.location.href.split("#")[0];for(var j=0,f=g.length;j<f;j++){if(h.indexOf(g[j])!==-1){this._getWxInfo(this._genWxConfig);return}}var l=b.localStorage.getItem("wxInfo");if(l){this._wxInfo=JSON.parse(l);var k=this._wxInfo[b.location.pathname]||"";if(k["noncestr"]&&k["signature"]&&k["ts"]){this._genWxConfig(k["noncestr"],k["signature"],k["ts"]);return true}}this._getWxInfo(this._genWxConfig);return},init:function(){var f=["p-editinfo.html","t-editinfo.html","t-messagenew.html","t-messageshow.html","p-messageshow.html","t-sharet.html","p-share.html"];this._weChatAuto(f)}};d.init()})(jQuery,window,document);